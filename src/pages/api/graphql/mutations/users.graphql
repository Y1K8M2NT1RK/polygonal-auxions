mutation Login($email: String!, $password: String!) {
  login(email: $email, password: $password) {
    ... on MutationLoginSuccess {
      __typename
      data {
        accessToken
      }
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation UpdateMyProfile(
  $name: String,
  $name_kana: String,
  $birthday: String,
  $introduction: String,
  $phone_number: String,
  $address: String,
  $bg: ImageInput,
  $icon: ImageInput
) {
  updateMyProfile(
    name: $name,
    name_kana: $name_kana,
    birthday: $birthday,
    introduction: $introduction,
    phone_number: $phone_number,
    address: $address,
    bg: $bg,
    icon: $icon,
  ) {
    ... on MutationUpdateMyProfileSuccess {
      __typename
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation UpdatePassword($password: String!, $passwordConfirmation: String!) {
  updatePassword(password: $password, passwordConfirmation: $passwordConfirmation) {
    ... on MutationUpdatePasswordSuccess {
      __typename
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation Logout {
  logout
}

# invalidate all sessions for current user
mutation LogoutAll {
  logoutAll
}

mutation followOrUnfollow($following_id: String!, $mode: String!){
  followOrUnfollow(following_id: $following_id, mode: $mode){
     __typename
  }
}

# Admin User Management Mutations
mutation AdminCreateUser(
  $handle_name: String!,
  $name: String!,
  $name_kana: String,
  $email: String!,
  $password: String!,
  $phone_number: String,
  $address: String,
  $introduction: String,
  $birthday: String
) {
  adminCreateUser(
    handle_name: $handle_name,
    name: $name,
    name_kana: $name_kana,
    email: $email,
    password: $password,
    phone_number: $phone_number,
    address: $address,
    introduction: $introduction,
    birthday: $birthday
  ) {
    ... on MutationAdminCreateUserSuccess {
      __typename
      data {
        id
        handle_name
        name
        email
      }
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation AdminUpdateUser(
  $id: String!,
  $handle_name: String,
  $name: String,
  $name_kana: String,
  $email: String,
  $phone_number: String,
  $address: String,
  $introduction: String,
  $birthday: String
) {
  adminUpdateUser(
    id: $id,
    handle_name: $handle_name,
    name: $name,
    name_kana: $name_kana,
    email: $email,
    phone_number: $phone_number,
    address: $address,
    introduction: $introduction,
    birthday: $birthday
  ) {
    ... on MutationAdminUpdateUserSuccess {
      __typename
      data {
        id
        handle_name
        name
        email
      }
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation AdminDeleteUser($id: String!) {
  adminDeleteUser(id: $id) {
    ... on MutationAdminDeleteUserSuccess {
      __typename
      data
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation RequestPasswordReset($emailOrHandle: String!) {
  requestPasswordReset(emailOrHandle: $emailOrHandle) {
    ... on MutationRequestPasswordResetSuccess {
      __typename
      success
      token
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

mutation ResetPassword($token: String!, $password: String!, $passwordConfirmation: String!) {
  resetPassword(token: $token, password: $password, passwordConfirmation: $passwordConfirmation) {
    ... on MutationResetPasswordSuccess {
      __typename
      data
    }
    ... on ZodError {
      __typename
      message
      fieldErrors {
        message
      }
    }
  }
}

# CSRF Token issuance (replaces old /api/csrf route)
mutation IssueCsrfToken {
  issueCsrfToken
}